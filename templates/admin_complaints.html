<html>
    <html lang="en">
    <link rel="stylesheet" href="/static/style.css">
    <a href="/admin/dashboard" class="back-btn">‚¨ÖÔ∏è Back to Dashboard</a>
<head>
    <meta charset="UTF-8">
    <title>Admin - Users</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body {
  font-family: 'Segoe UI', sans-serif;
  background-color: #f9f9f9;
  margin: 0;
  padding: 20px;
}

h2 {
  color: #0078D4;
  margin-bottom: 20px;
}

.complaint-card {
  background-color: #fff;
  border: 1px solid #ddd;
  border-left: 5px solid #0078D4;
  padding: 15px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.complaint-card p {
  margin: 6px 0;
}

textarea {
  width: 100%;
  height: 80px;
  padding: 10px;
  margin-top: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
  resize: vertical;
}

select {
  margin-top: 10px;
  padding: 6px;
  border-radius: 4px;
  border: 1px solid #ccc;
}

button {
  margin-top: 10px;
  padding: 8px 16px;
  background-color: #0078D4;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #005fa3;
}

.flash-messages {
  list-style: none;
  padding: 10px;
  background-color: #e0f7fa;
  border-left: 5px solid #0078D4;
  color: #0078D4;
  font-weight: bold;
  margin-bottom: 20px;
}
</style>
<body>
    <h2>üì¨ Complaints Dashboard</h2>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flash-messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% for c in complaints %}
  <div class="complaint-card">
    <p><strong>Name:</strong> {{ c.name }}</p>
    <p><strong>Email:</strong> {{ c.email }}</p>
    <p><strong>Phone:</strong> {{ c.phone }}</p>
    <p><strong>Subject:</strong> {{ c.subject }}</p>
    <p><strong>Message:</strong> {{ c.message }}</p>

    {% if c.reply %}
      <p><strong>Reply:</strong> {{ c.reply }} <em>(via {{ c.reply_method }})</em></p>
    {% else %}
      <form method="post" action="/admin/complaints/reply/{{ c.id }}">
        <textarea name="reply" placeholder="Type your reply here..." required></textarea>
        <select name="reply_method" required>
          <option value="email">Reply via Email</option>
          <option value="phone">Reply via Phone</option>
        </select>
        <button type="submit">Send Reply</button>
      </form>
    {% endif %}
  </div>
{% endfor %}
</body>
</html>